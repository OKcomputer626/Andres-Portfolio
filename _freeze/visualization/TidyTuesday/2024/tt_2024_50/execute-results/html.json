{
  "hash": "3fcabc67521165ab9630396fa3c586b3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"The Scent of Data\"\ndescription: \"Perfume ratings have become more varied in recent decades, with the 2000s and 2010s displaying the widest range driven by diverse user opinions, while the highest ratings consistently reflect luxury brands.\"\nlightbox: true\ndate: December 20, 2024\ncategories: [TidyTuesday, R Programming, Data Visualization]\ntags: [ggplot2, parfumo, data-visualization, tidyverse]\nimage: \"tt_2024_50.png\"\neditor_options: \n  chunk_output_type: inline\n---\n\n\n\n![Dumbbell plot showing perfumes with the lowest and highest average ratings by decade (1980â€“2024), based on 25+ user ratings on Parfumo. Each row represents a decade, labeled with the total number of rated perfumes (n). The endpoints of each dumbbell indicate the lowest and highest-rated perfumes, with notable examples annotated. Source: Parfumo.](tt_2024_50.png){#fig-1}\n\n### <mark> **How This Graphic Was Made** </mark>\n\n#### 1. ðŸ“¦ Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load necessary packages using pacman for easier dependency management\npacman::p_load(\n  tidyverse,   # Collection of R packages for data science (ggplot2, dplyr, etc.)\n  showtext,    # Enables custom fonts for ggplot2\n  ggtext,      # Adds rich text formatting to ggplot2\n  skimr       # Provides summary statistics in a readable format\n)\n\n# Add custom Google fonts for use in plots\nfont_add_google(\"Monsieur La Doulaise\")  # Decorative script font for titles\nfont_add_google(\"Roboto Condensed\")      # Modern condensed font for body text\nfont_add_google(\"Roboto\")                # Clean sans-serif font for captions\n\n# Load a specific font from a local file (Font Awesome for branding/icons)\nfont_add(\"Font Awesome 6 Brands\", here::here(\"fonts/otfs/Font Awesome 6 Brands-Regular-400.otf\"))\n\n# Assign font names to variables for easy application in plots\ntitle <- \"Monsieur La Doulaise\"\ntext <- \"Roboto Condensed\"\ncaption <- \"Roboto\"\n\n# Automatically enable the use of showtext for all plots\nshowtext_auto()\n\n# Set DPI for high-resolution text rendering\nshowtext_opts(dpi = 300)\n\n# Source custom utility functions for social media captions and image processing\nsource(here::here(\"R/utils/social_caption.R\"))  # Utility for adding social media captions\nsource(here::here(\"R/utils/image_utils.R\"))     # Utility for image handling\n```\n:::\n\n\n\n#### 2. ðŸ“– Read in the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the TidyTuesday data for the 50th week of 2024\ntuesdata <- tidytuesdayR::tt_load(2024, week = 50)\n\n# Extract and assign the specific dataset (parfumo_data_clean) from the loaded list\nparfumo_data_clean <- tuesdata$parfumo_data_clean\n\n# Display the README file for the dataset, providing context and data dictionary\ntidytuesdayR::readme(tuesdata)\n\n# Remove the original list (tuesdata) from the environment to free up space\nrm(tuesdata)\n```\n:::\n\n\n\n#### 3. ðŸ•µï¸ Examine the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Display a glimpse of the parfumo_data_clean dataset, showing its structure and a preview of columns\nglimpse(parfumo_data_clean)\n\n# Generate a detailed summary of the dataset, including descriptive statistics for each column\nskim(parfumo_data_clean)\n```\n:::\n\n\n\n#### 4. ðŸ¤¼ Wrangle Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter perfumes released between 1980 and 2024 with more than 25 ratings, \n# and create a 'decade' column for grouping\ndf1 <- parfumo_data_clean %>%\n  filter(between(Release_Year, 1980, 2024),\n         Rating_Count > 25) %>%\n  mutate(decade = floor(Release_Year / 10) * 10,\n         decade = glue::glue(\"{decade}s\"))\n\n# Summarize ratings by decade, find the highest and lowest-rated perfumes, \n# and reshape the data for visualization\ndf2 <- df1 %>%\n  group_by(decade) %>%\n  summarise(n = n(),\n            min_rating = min(Rating_Value),\n            max_rating = max(Rating_Value),\n            name_min_rating = Name[which.min(Rating_Value)],\n            name_max_rating = Name[which.max(Rating_Value)]) %>%\n  pivot_longer(\n    cols = min_rating:max_rating,\n    names_to = \"type\",\n    values_to = \"value\"\n  ) %>%\n  mutate(\n    names = if_else(type == \"min_rating\", name_min_rating, name_max_rating),\n    ylab = glue::glue(\"<span style='color:black'>**{decade}**</span> (n={scales::comma(n, accuracy=1)})\")\n  ) %>%\n  ungroup() %>%\n  select(-c(name_min_rating, name_max_rating))\n```\n:::\n\n\n\n#### 5. ðŸ”¤ Text\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a social media caption with customized colors and font for consistency in visualization\nsocial <- social_caption(icon_color = \"grey40\", font_color = \"grey40\", font_family = caption) \n\n# Construct the final plot caption by combining TidyTuesday details, data source, and the social caption\ncap <- paste0(\n  \"#TidyTuesday: Week 50, 2024 | **Source**: Parfumo <br>\", social\n)\n```\n:::\n\n\n\n#### 6. ðŸ“Š Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot perfumes with the highest and lowest average ratings by decade (1980â€“2024, 25+ ratings).\np <- df2 %>%\n  ggplot(aes(x = value, y = fct_rev(ylab), color = type, group = ylab, label = names)) +\n  geom_line(color=\"#AC9C8D\") +\n  geom_point(size = 2.5) + \n  geom_text(size = 2.5, vjust = -1, family = text, fontface = \"italic\") +\n  scale_x_continuous(limits = c(0, 10), breaks = seq(0, 10, by = 2.5), expand = c(0,0)) +\n  scale_y_discrete(expand = expansion(mult = c(.05, .07))) +\n  scale_color_manual(values = c(\"#322D29\", \"#72383D\")) +\n  coord_cartesian(clip = \"off\") +\n  cowplot::theme_minimal_grid(9.5,line_size = 0.3) +\n  theme(\n    text = element_text(family = text),\n    axis.title = element_text(color = \"grey15\", size = 8),\n    axis.text.y = element_markdown(hjust = 0, color = \"grey40\"),\n    axis.text.x = element_text(color = \"grey20\"),\n    plot.margin = margin(.1,1.2,.1,.1, unit=\"cm\"),\n    plot.title = element_markdown(size = 25, hjust = 0.5, family = title),\n    plot.subtitle = element_markdown(hjust = 0.5, size = 9, margin = margin(b=7), color = \"grey20\"),\n    plot.background = element_rect(fill = \"#fff6f6\"),\n    plot.caption = element_textbox_simple(margin = margin(t=7), hjust = 0, size = 5, color = \"grey40\", family = caption),\n    plot.caption.position = \"plot\",\n    axis.ticks.y = element_blank(),\n    panel.grid.major.y = element_line(linetype = \"dotted\"),\n    legend.position = \"none\",\n  ) +\n  labs(\n    title = \"Parfumo\",\n    subtitle = \"**The Scent of Data** - Perfumes with the <span style='color:#72383D;'>**Lowest**</span> and <span style='color:#322D29;'>**Highest**</span> Average Ratings by Decade (1980â€“2024) with 25+ Ratings\",\n    caption = cap,\n    x = \"Average Rating\", y = \"Decade\")\n```\n:::\n\n\n\n#### 7. ðŸ’¾ Save\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Save the plot for TidyTuesday 2024, Week 50 with specified dimensions.\nsave_plot(p, type = \"tidytuesday\", year = 2024, week = 50, width = 8, height = 4)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}