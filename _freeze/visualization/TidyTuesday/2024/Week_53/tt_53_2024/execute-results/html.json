{
  "hash": "1f6370488d78e2a20cfc396fd146b203",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"James Beard Foundation\"\ndescription: \"The James Beard Foundation Awards are annual honors recognizing excellence in the culinary, hospitality, and food media industries across the United States.\"\nlightbox: true\ndate: December 30, 2024\ncategories: [TidyTuesday, R Programming, Data Visualization]\ntags: [ggplot2, data-visualization, tidyverse]\nimage: \"tt_53_2024.png\"\neditor: \n  markdown: \n    wrap: sentence\n---\n\n![The plot shows the total wins and nominations for the top four broadcast media platformsâ€”Instagram, iTunes, Netflix, and YouTubeâ€”at the James Beard Awards from 2019 to 2024. Opaque dots represent wins, while transparent dots indicate nominations, with Netflix and YouTube leading in overall recognition. Source: James Beard Foundation](tt_53_2024.png){#fig-1}\n\n### <mark> **How This Graphic Was Made** </mark>\n\n#### 1. ðŸ“¦ Load Packages & Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load packages\npacman::p_load(\n  tidyverse,\n  showtext,\n  ggtext,\n  skimr,\n  glue\n)\n\n# Add Google fonts\nfont_add_google(\"Roboto Condensed\")\nfont_add_google(\"Oswald\")\n\n# Add local font\nfont_add(\"Font Awesome 6 Brands\", here::here(\"fonts/otfs/Font Awesome 6 Brands-Regular-400.otf\"))\n\n# Enable custom fonts\nshowtext_auto()\nshowtext_opts(dpi = 300)\n```\n:::\n\n\n#### 2. ðŸ“– Read in the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the TidyTuesday data\ntuesdata <- tidytuesdayR::tt_load(2024, week = 53)\n\nbroadcast_media <- tuesdata$broadcast_media\n\ntidytuesdayR::readme(tuesdata)\n\n# Remove the original list (tuesdata) from the environment to free up space\nrm(tuesdata)\n```\n:::\n\n\n#### 3. ðŸ•µï¸ Examine the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# View data structure\nglimpse(broadcast_media)\n\n# Summary statistics\nskim(broadcast_media)\n```\n:::\n\n\n#### 4. ðŸ¤¼ Wrangle Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 1: Get top 4 affiliations by frequency\ntop_affiliations <- broadcast_media %>%\n  filter(year >= max(year) - 5) %>%\n  mutate(affiliation = str_split(affiliation, \",\")) %>%\n  unnest(affiliation) %>%\n  mutate(affiliation = str_trim(affiliation),\n         affiliation = str_to_lower(affiliation)) %>%\n  group_by(affiliation) %>%\n  count() %>%\n  ungroup() %>%\n  slice_max(order_by = n, n = 4, with_ties = FALSE) %>%\n  pull(affiliation)\n\n# Step 2: Filter rows with top affiliations\ndf <- broadcast_media %>%\n  filter(year >= max(year) - 5) %>%\n  mutate(affiliation = str_split(affiliation, \",\")) %>%\n  unnest(affiliation) %>%\n  mutate(affiliation = str_trim(affiliation),\n         affiliation = str_to_lower(affiliation)) %>%\n  filter(str_detect(affiliation, paste(top_affiliations, collapse = \"|\"))) %>%\n  mutate(affiliation = str_extract(affiliation, paste(top_affiliations, collapse = \"|\")))\n\n# Step 3: Map logos to affiliations\nlogo_df <- tribble(\n  ~affiliation, ~logo,\n  \"youtube\", \"youtube_logo.png\",\n  \"netflix\", \"netflix_logo.png\",\n  \"itunes\", \"itunes_logo.png\",\n  \"instagram\", \"instagram_logo.png\"\n) |>\n  mutate(\n    logo = here::here(\"visualization\", \"TidyTuesday\", \"2024\", \"Week_53\", \"logo\", logo)\n  )\n\ndf <- df %>%\n  left_join(logo_df, by = \"affiliation\") %>%\n  mutate(\n    logo_label = glue(\"<img src='{logo}' width='{ifelse(affiliation == 'itunes', 30, 50)}'/>\")\n  )\n\n# Step 5: Count rank occurrences per affiliation\nresults <- df %>%\n  group_by(affiliation, rank) %>%\n  count() %>%\n  arrange(desc(n))\n\n# Step 6: Create summary text for plot facets\nresults_text <- results %>%\n  mutate(text = glue(\"{rank}: {n}\")) %>%\n  group_by(affiliation) %>%\n  summarise(summary = paste(text, collapse = \"\\n\"), .groups = \"drop\")\n\n# Step 7: Attach summary text to data for plotting\ndf <- df %>%\n  left_join(results_text, by = \"affiliation\")\n\n# Step 8: Print dataframe for validation\nprint(df)\n```\n:::\n\n\n#### 5. ðŸ”¤ Text\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntitle <- \"James Beard Awards Wins and Nominations Between 2019 to 2024\"\n\nsubtitle <- \"Total Wins and Nominations for the Top Four Broadcast Media Across All Subcategories\"\n\n# Create a social media caption with customized colors and font for consistency in visualization\nsocial <- andresutils::social_caption(font_family = \"Roboto Condensed\", icon_color = \"grey25\") \n\n# Construct the final plot caption by combining TidyTuesday details, data source, and the social caption\ncap <- paste0(\n  \"#TidyTuesday: Week 53, 2024 | **Source**: James Beard Foundation, Wikipedia, curated by Jon Harmon | **Graphic**: \", social\n)\n```\n:::\n\n\n#### 6. ðŸ“Š Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 1: Create base plot with dot plot, facet by logo, and summary text\np <- df %>%\n  ggplot(aes(x = factor(year), alpha = rank, fill = factor(year))) +\n  geom_dotplot(method = \"histodot\", binwidth = 1, stackdir = \"up\",\n               stackgroups = TRUE, color=\"grey50\", stackratio = 0.75, dotsize = .8) +\n  facet_wrap(vars(logo_label), nrow = 1) +\n  scale_alpha_manual(values = c(0.45, 1)) +\n  scale_fill_manual(values = c(\"#ef476f\", \"#ffd166\", \"#06d6a0\", \"#118ab2\", \"#073b4c\")) +\n  labs(title = title, subtitle = subtitle, caption = cap) + \n   geom_text(data = df %>% distinct(affiliation, summary, .keep_all = TRUE),\n            aes(x = -Inf, y = Inf, label = summary),\n            hjust = 0, vjust = 1,\n            inherit.aes = FALSE,\n            family = \"Roboto Condensed\", size = 2, color = \"grey25\") +\n  theme_void() +\n  theme(\n    text = element_text(family = \"Roboto Condensed\"),\n    plot.title = element_text(hjust = 0.5, family = \"Oswald\", face = \"bold\", margin = margin(b = 5, t = 10)),\n    plot.subtitle = element_text(hjust = 0.5, margin = margin(b = 10, t = 0)),\n    plot.margin = margin(5, 10, 5, 10),\n    plot.background = element_rect(fill = \"#ffffff\", colour = \"#ffffff\"),\n    panel.background = element_rect(fill = \"#ffffff\", colour = \"#ffffff\"),\n    plot.caption = element_markdown(hjust = 0.5, size = 5, margin = margin(b = 5, t = 10)),\n    axis.text.x = element_text(size = 7),\n    legend.position = \"none\",\n    strip.text = element_markdown(hjust = 0.5),\n    panel.spacing = unit(1.5, \"cm\")\n  ) +\n  coord_cartesian(clip = \"off\")\n\n# Step 2: Add curve annotations and text for the Instagram facet\np2 <- p +\n  geom_curve(data = df %>% filter(affiliation == \"instagram\"),\n             aes(x = 2, y = 0.4, xend = 3, yend = 0.3),\n             arrow = arrow(length = unit(0.15, \"cm\"), type = \"closed\"),\n             color = \"grey25\", linewidth = 0.3, curvature = -0.3, inherit.aes = FALSE) +\n  geom_text(data = df %>% filter(affiliation == \"instagram\"),\n            aes(x = 2, y = 0.4, label = \"Opaque dots\\nshow wins\"),\n            color = \"grey25\", family = \"Roboto Condensed\", size = 1.9, hjust = 1) +\n  geom_curve(data = df %>% filter(affiliation == \"instagram\"),\n             aes(x = 4.4, y = 0.5, xend = 4.4, yend = 0.24),\n             arrow = arrow(length = unit(0.15, \"cm\"), type = \"closed\"),\n             color = \"grey25\", linewidth = 0.3, curvature = 0.8, inherit.aes = FALSE) +\n  geom_text(data = df %>% filter(affiliation == \"instagram\"),\n            aes(x = 4.4, y = 0.5, label = \"Transparent dots\\nshow nominations\"),\n            color = \"grey25\", family = \"Roboto Condensed\", size = 1.9, hjust = 0)\n```\n:::\n\n\n#### 7. ðŸ’¾ Save\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Save plot with dimensions\nandresutils::save_plot(p2, type = \"tidytuesday\", year = 2024, week = 53, width = 8, height = 4.5)\n```\n:::\n\n\n#### 8. ðŸš€ GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nExplore the complete code for this visualization in the following Quarto file: [`tt_53_2024.qmd`](https://github.com/OKcomputer626/Andres-Portfolio/blob/master/visualization/TidyTuesday/2024/Week_53/tt_53_2024.qmd).\n\nFor additional visualizations and projects, [click here](https://github.com/OKcomputer626/Andres-Portfolio).\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}