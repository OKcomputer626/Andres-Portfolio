{
  "hash": "c02c5b65bb389ab32e7eb941de19a3fe",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Passport Power in the Americas and Beyond\"\ndescription: \"Visualizing global passport access in 2025 with boxplots by region and tracking how Canada, Mexico, and the United States have shifted in the Americas' passport rankings since 2006.\"\nlightbox: true\ndate: September 15, 2025\ncategories: [TidyTuesday, R Programming, Data Visualization, ggplot2]\ntags: [ggplot2, data-visualization, tidyverse]\nimage: \"tt_36_2025.png\"\neditor_options: \n  chunk_output_type: inline\n---\n\n![Two complementary views of passport power. Top: a boxplot of visa-free destinations in 2025 across seven world regions, with leading countries annotated. Bottom: a bump chart tracking passport rankings in the Americas from 2006‚Äì2025, highlighting Canada, Mexico, and the United States against their neighbors.](tt_36_2025.png){#fig-1}\n\n### <mark> **How This Graphic Was Made** </mark>\n\n#### 1. üì¶ Load Packages & Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load necessary packages using pacman for easier dependency management\npacman::p_load(\n  tidyverse,   # Collection of R packages for data science (ggplot2, dplyr, etc.)\n  showtext,    # Enables custom fonts for ggplot2\n  ggtext,      # Adds rich text formatting to ggplot2\n  skimr,       # Provides summary statistics in a readable format\n  glue,\n  janitor,\n  ggbump,\n  ggflags,\n  patchwork,\n  ggrepel\n)\n\n# Add Google fonts\nfont_add_google(\"Fjalla One\", family = \"Fjalla\")\n\n# Add local font\nfont_add(\"Font Awesome 6 Brands\", here::here(\"fonts/otfs/Font Awesome 6 Brands-Regular-400.otf\"))\n\n# Automatically enable the use of showtext for all plots\nshowtext_auto()\n\n# Set DPI for high-resolution text rendering\nshowtext_opts(dpi = 300)\n```\n:::\n\n\n#### 2. üìñ Read in the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the TidyTuesday data\ntuesdata <- tidytuesdayR::tt_load(2025, week = 36)\n\n# Extract dataset and clean column names\ncountry <- tuesdata$country_lists %>% clean_names()\nrank <- tuesdata$rank_by_year %>% clean_names()\n\n# Show the README for context\ntidytuesdayR::readme(tuesdata)\n\n# Drop the list to free memory\nrm(tuesdata)\n```\n:::\n\n\n#### 3. üïµÔ∏è Examine the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Display the structure of the agencies dataset, including column types and sample values\nglimpse(country)\nglimpse(rank)\n\n# Generate a detailed summary of the agencies dataset, including distribution and missing values\nskim(country)\nskim(rank)\n```\n:::\n\n\n#### 4. ü§º Wrangle Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_2025 <- rank %>%\n  filter(year %in% 2025) %>%\n  drop_na(visa_free_count) %>%\n  mutate(region = factor(str_to_title(region),\n                         levels = sort(unique(str_to_title(region)))))\n\namericas <- rank %>%\n  filter(region == \"AMERICAS\")\n\ntop_country <- df_2025 %>%\n  group_by(region) %>%\n  slice_max(visa_free_count, n = 1, with_ties = FALSE) %>%\n  ungroup()\n```\n:::\n\n\n#### 5. üî§ Text\n\n\n::: {.cell}\n\n```{.r .cell-code}\nregion_colors <- c(\n  \"Africa\" = \"#f94144\",\n  \"Americas\"   = \"#f3722c\",\n  \"Asia\" = \"#f8961e\",\n  \"Caribbean\"  = \"#f9c74f\",\n  \"Europe\" = \"#90be6d\",\n  \"Middle East\" = \"#43aa8b\",\n  \"Oceania\" = \"#577590\"\n)\n\n# Define your custom colors\ncountry_colors <- c(\n  \"Mexico\"        = \"#006341\", # green\n  \"Canada\"        = \"#D80621\", # red\n  \"United States\" = \"#0A3161\"  # blue\n)\n\n# Generate a social media caption with custom colors and font styling\nsocial <- andresutils::social_caption(font_family = \"Fjalla\", icon_color = \"#4D4DFF\", font_color = \"grey45\") \n\n# Construct the final plot caption with TidyTuesday details, data source, and social caption\ncap <- paste0(\n  \"#TidyTuesday: Week 36, 2025 | **Source**: Henley Passport Index | **Graphic**: \", social\n)\n```\n:::\n\n\n#### 6. üìä Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- df_2025 %>%\n  ggplot(aes(x = region, y = visa_free_count, color = region)) +\n  geom_boxplot(\n    width = .2,\n    outlier.shape = NA,\n    fill = \"#f4f4f2\",\n    position = position_nudge(x = 0.2, y = 0)\n  ) +\n  geom_point(\n    shape = 95,\n    size = 6,\n    alpha = .2,\n    position = position_nudge(x = -0.1, y = 0)\n  ) +\n  geom_label_repel(\n    data = top_country,\n    aes(label = paste0(\n      country, \": \", visa_free_count, \" destinations\"\n    ), x = as.numeric(region) - 0.1),\n    family = \"Fjalla\",\n    size = 2,\n    nudge_y = 12,\n    box.padding = 0.5\n  ) +\n  scale_color_manual(values = region_colors) +\n  labs(title = \"Visa-Free Travel Access by Region (2025)\", subtitle = \"Number of destinations accessible without a visa (or with visa on arrival, visitor‚Äôs permit, or ETA), grouped by seven world regions\") +\n  theme_minimal() +\n  theme(\n    text = element_text(family = \"Fjalla\"),\n    plot.title.position = \"plot\",\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_textbox_simple(color = \"grey30\", margin = margin(b = 10)),\n    legend.position = \"none\",\n    axis.title = element_blank(),\n    panel.grid = element_line(size = 0.2),\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    margin = margin(5, 5, 5, 5)\n  )\n\n\np2 <- americas %>% drop_na(visa_free_count) %>%\n  ggplot(aes(x = year, y = rank)) +\n  geom_bump(\n    data = americas %>% filter(!country %in% c(\"Canada\", \"Mexico\", \"United States\")),\n    aes(group = country),\n    size = .7,\n    alpha = 0.3,\n    color = \"grey70\",\n    show.legend = FALSE,\n    smooth = 5\n  ) +\n  geom_point(\n    data = americas %>% filter(!country %in% c(\"Canada\", \"Mexico\", \"United States\")),\n    alpha = 0.3,\n    color = \"grey70\"\n  ) +\n  geom_bump(\n    data = americas %>% filter(country %in% c(\"Canada\", \"Mexico\", \"United States\")),\n    aes(group = country, color = country),\n    size = 1.1,\n    show.legend = FALSE,\n    smooth = 5\n  ) +\n  geom_point(\n    data = americas %>% filter(country %in% c(\"Canada\", \"Mexico\", \"United States\")),\n    aes(fill = country),\n    size = 2.4,\n    shape = 21,\n    show.legend = FALSE,\n    color = \"#FFFFFF\",\n    stroke = 0.2\n  ) +\ngeom_flag(\n    data = americas %>%\n      filter(country %in% c(\"Canada\", \"Mexico\", \"United States\"),\n             year == max(year)) %>%\n      mutate(code = tolower(code)) %>%            \n      filter(!is.na(code), nchar(code) == 2),   \n    aes(country = code),                            \n    size = 8\n  ) +\nscale_color_manual(values = country_colors) +\n  scale_fill_manual(values = country_colors) +\n  scale_x_continuous(\n    expand = c(0.01, 0.01),\n    breaks = seq(2006, 2025, by = 1),\n    labels = function(x)\n      ifelse(\n        x == 2006,\n        as.character(x),\n        paste0(\"'\", substr(x, 3, 4))\n      ),\n    # abbreviated\n    sec.axis = dup_axis()\n  ) +\n  scale_y_reverse(breaks = c(1, 15, 30, 45, 60, 75),\n                  expand = c(0.01, 0.01)) +\n  coord_cartesian(clip = \"off\") +\n  labs(\n    title = \"How Passport Power Has Shifted in the Americas (2006-2025)\",\n    subtitle = \"Canada, Mexico, and the United States highlighted against other countries in the region\"\n  ) +\n  theme_minimal() +\n  theme(\n    text = element_text(family = \"Fjalla\"),\n    plot.title.position = \"plot\",\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_text(color = \"grey30\"),\n    axis.title = element_blank(),\n    panel.grid = element_blank(),\n    axis.ticks.length = unit(.2, \"cm\"),\n    axis.ticks = element_line(color = \"grey10\", size = .3),\n    margin = margin(5, 5, 5, 5)\n  )\n\nfinal_plot <- (p1 / p2) +\n  plot_annotation(\n    caption = cap,\n    theme = theme(\n      text = element_text(family = \"Fjalla\"),\n      plot.caption = element_markdown(\n        size = 5,\n        hjust = 0,\n        color = \"grey45\",\n        margin = margin(t = 5)\n      ),\n      plot.margin = margin(5, 5, 5, 5)\n    )\n  )\n```\n:::\n\n\n#### 7. üíæ Save\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Save the plot for TidyTuesday 2025, Week 07 with specified dimensions.\nandresutils::save_plot(final_plot, type = \"tidytuesday\", year = 2025, week = 36, width = 9, height = 10)\n```\n:::\n\n\n#### 8. üöÄ GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nThe complete code for this analysis is available in [`tt_36_2025.qmd`](https://github.com/OKcomputer626/Andres-Portfolio/blob/master/visualization/TidyTuesday/2025/tt_36_2025.qmd).\n\nFor the full repository, [click here](https://github.com/OKcomputer626/Andres-Portfolio).\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}