{
  "hash": "cdb4d6122948e8936c8860216e22b5e4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Pacific Palisades\"\ndescription: \"A map of Pacific Palisades, California, showing streets, building footprints, and the Pacific Ocean in a minimalist blue-and-beige design.\"\nlightbox: true\ndate: January 15, 2025\ncategories: [TidyTuesday, R Programming, Data Visualization]\ntags: [ggplot2, data-visualization, tidyverse]\nimage: \"Palisades Map.png\"\neditor: \n  markdown: \n    wrap: sentence\n---\n\n\n\n![A minimalist map of Pacific Palisades, California, featuring its detailed street network and building footprints, with the Pacific Ocean labeled prominently at the bottom. The design uses a clean blue-and-beige color scheme for clarity and elegance.](Palisades Map.png){#fig-1}\n\n### <mark> **How This Graphic Was Made** </mark>\n\n#### 1. ðŸ“¦ Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load necessary packages using pacman for easier dependency management\npacman::p_load(\n  sf,          # For handling shapefiles and geospatial data\n  osmdata,     # For fetching OpenStreetMap data\n  showtext,    # For adding custom Google fonts\n  ggtext,      # For enhanced text formatting in plots\n  tidyverse,   # For data manipulation and visualization\n  sysfonts,     # For working with system fonts\n  glue\n)\n\n# Add Google Font\n# Add the Posterama 1927 font using its full path\nfont_add(family = \"Posterama\", regular = \"C:/Users/gonza/AppData/Local/Microsoft/Windows/Fonts/Posterama 1927.ttf\")\nfont_add_google(\"Roboto Condensed\")\n\n# Add local font\nfont_add(\"Font Awesome 6 Brands\", here::here(\"fonts/otfs/Font Awesome 6 Brands-Regular-400.otf\"))\n\n# Enable custom fonts\nshowtext_auto()\nshowtext_opts(dpi = 300)\n```\n:::\n\n\n\n#### 2. ðŸ“– Load Building Footprints\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the building footprints from a GeoPackage file\npalisades_path <- here::here(\"Data/Palisades_buildings.gpkg\")\nbuildings <- st_read(palisades_path)\n```\n:::\n\n\n\n#### 3. ðŸ•µï¸ Filter and Transform PALISADES Dataa\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter for buildings in the PALISADES ZIP Code\npalisades <- buildings %>%\n  filter(str_detect(SitusZIP, '90272'))\n\n# Reproject PALISADES data to WGS84 (EPSG:4326)\nbuildings <- st_transform(palisades, crs = 4326)\n```\n:::\n\n\n\n#### 4. ðŸ¤¼ Define the Los Angeles Bounding Box\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the geographic extent of Los Angeles for the plot\nla_bbox <- st_bbox(c(xmin = -118.56, ymin = 34.03, xmax = -118.50, ymax = 34.06), crs = 4326)\nla_bb <- st_as_sfc(la_bbox)\n```\n:::\n\n\n\n#### 5. ðŸ”¤ Text\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntitle <- \"PACIFIC PALISADES\"\n\nsubtitle <- \"CALIFORNIA, USA\"\n\n# Create a social media caption with customized colors and font for consistency in visualization\nsocial <- andresutils::social_caption(font_family = \"Roboto Condensed\", icon_color = \"#1A3D91\", font_color = \"grey45\") \n\n# Construct the final plot caption by combining TidyTuesday details, data source, and the social caption\ncap <- paste0(\n  \"**Source**: OpenStreetMap | **Graphic**: \", social\n)\n```\n:::\n\n\n\n\n#### 6. ðŸ—ºï¸ Download OpenStreetMap Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fetch major streets\nla_big <- la_bb %>%\n  opq() %>%\n  add_osm_feature(key = \"highway\",\n                  value = c(\"motorway\", \"primary\", \"secondary\", \"tertiary\", \"trunk\")) %>%\n  osmdata_sf()\n\n# Fetch street connectors (links)\nla_links <- la_bb %>%\n  opq() %>%\n  add_osm_feature(key = \"highway\",\n                  value = c(\"motorway_link\", \"primary_link\", \"secondary_link\", \n                            \"tertiary_link\", \"trunk_link\")) %>%\n  osmdata_sf()\n\n# Fetch minor streets\nla_small <- la_bb %>%\n  opq() %>%\n  add_osm_feature(key = \"highway\",\n                  value = c(\"residential\", \"road\", \"footway\")) %>%\n  osmdata_sf()\n```\n:::\n\n\n\n#### 7. ðŸ“Š Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot the streets and building footprints\np <- ggplot() +\n  geom_sf(data = la_big$osm_lines, inherit.aes = FALSE, color = \"#1A3D91\", linewidth = 0.5) +\n  geom_sf(data = la_links$osm_lines, inherit.aes = FALSE, color = \"#1A3D91\", linewidth = 0.25) +\n  geom_sf(data = la_small$osm_lines, inherit.aes = FALSE, color = \"#1A3D91\", linewidth = 0.15) +\n  geom_sf(data = palisades, fill = \"#FFFFFF\", color = \"#1A3D91\", linewidth = 0.05) +\n  annotate(\"text\", x = -118.54, y = 34.034, label = \"PACIFIC OCEAN\", family = \"Roboto Condensed\", angle = -30, color = \"#1A3D91\", alpha = 0.5) +\n  coord_sf(xlim = c(-118.56, -118.50), ylim = c(34.03, 34.06)) +\n  theme_void() +\n  theme(\n    text = element_text(family = \"Posterama\"),\n    plot.title = element_markdown(color = \"#1A3D91\", hjust = 0.5, size = 16, face = \"bold\"),\n    plot.subtitle = element_markdown(color = \"#1A3D91\", hjust = 0.5, size = 5, margin = margin(t = 1)),\n    plot.caption = element_markdown(family = \"Roboto Condensed\", hjust = 0, size = 3.5, color = \"grey45\"),\n    panel.background = element_rect(color = NA, fill = \"#F7F2E8\"),\n    plot.background = element_rect(color = NA, fill = \"#F7F2E8\")\n  ) +\n  labs(\n    title = title,\n    subtitle = subtitle,\n    caption = cap\n  )\n```\n:::\n\n\n\n#### 8. ðŸ’¾ Save\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Save the plot as a high-resolution PNG file\nggsave(\"Palisades Map.png\", p, height = 4, width = 6)\n```\n:::\n\n\n\n#### 9. ðŸš€ GitHub Repository\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for GitHub Repo\n\nExplore the complete code for this visualization in the following Quarto file: [`Palisades Map.qmd`](https://github.com/OKcomputer626/Andres-Portfolio/blob/master/visualization/TidyTuesday/2024/Week_53/tt_53_2024.qmd).\n\nFor additional visualizations and projects, [click here](https://github.com/OKcomputer626/Andres-Portfolio).\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}